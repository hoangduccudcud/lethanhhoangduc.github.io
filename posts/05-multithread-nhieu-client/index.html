<!doctype html><html lang=en dir=auto data-theme=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Xử Lý Nhiều Client Cùng Lúc Với Multithreading | Lê Thanh Hoàng Đức</title><meta name=keywords content="Java,Multithreading,Socket,Networking"><meta name=description content="Nâng cấp Server TCP để hỗ trợ nhiều Client kết nối đồng thời bằng cách sử dụng Thread trong Java."><meta name=author content="Lê Thanh Hoàng Đức"><link rel=canonical href=https://hoangduccudcud.github.io/posts/05-multithread-nhieu-client/><link crossorigin=anonymous href=/assets/css/stylesheet.44c8d4db067b228eda251a5abe2dc83fc94e6fc628afc81bde58904db5c7876b.css integrity="sha256-RMjU2wZ7Io7aJRpavi3IP8lOb8Yor8gb3liQTbXHh2s=" rel="preload stylesheet" as=style><link rel=icon href=https://hoangduccudcud.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://hoangduccudcud.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://hoangduccudcud.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://hoangduccudcud.github.io/apple-touch-icon.png><link rel=mask-icon href=https://hoangduccudcud.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://hoangduccudcud.github.io/posts/05-multithread-nhieu-client/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51);color-scheme:dark}.list{background:var(--theme)}.toc{background:var(--entry)}}@media(prefers-color-scheme:light){.list::-webkit-scrollbar-thumb{border-color:var(--code-bg)}}</style></noscript><script>localStorage.getItem("pref-theme")==="dark"?document.querySelector("html").dataset.theme="dark":localStorage.getItem("pref-theme")==="light"?document.querySelector("html").dataset.theme="light":window.matchMedia("(prefers-color-scheme: dark)").matches?document.querySelector("html").dataset.theme="dark":document.querySelector("html").dataset.theme="light"</script><meta property="og:url" content="https://hoangduccudcud.github.io/posts/05-multithread-nhieu-client/"><meta property="og:site_name" content="Lê Thanh Hoàng Đức"><meta property="og:title" content="Xử Lý Nhiều Client Cùng Lúc Với Multithreading"><meta property="og:description" content="Nâng cấp Server TCP để hỗ trợ nhiều Client kết nối đồng thời bằng cách sử dụng Thread trong Java."><meta property="og:locale" content="vi-vn"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-12-25T00:00:00+00:00"><meta property="article:modified_time" content="2025-12-25T00:00:00+00:00"><meta property="article:tag" content="Java"><meta property="article:tag" content="Multithreading"><meta property="article:tag" content="Socket"><meta property="article:tag" content="Networking"><meta name=twitter:card content="summary"><meta name=twitter:title content="Xử Lý Nhiều Client Cùng Lúc Với Multithreading"><meta name=twitter:description content="Nâng cấp Server TCP để hỗ trợ nhiều Client kết nối đồng thời bằng cách sử dụng Thread trong Java."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://hoangduccudcud.github.io/posts/"},{"@type":"ListItem","position":2,"name":"Xử Lý Nhiều Client Cùng Lúc Với Multithreading","item":"https://hoangduccudcud.github.io/posts/05-multithread-nhieu-client/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Xử Lý Nhiều Client Cùng Lúc Với Multithreading","name":"Xử Lý Nhiều Client Cùng Lúc Với Multithreading","description":"Nâng cấp Server TCP để hỗ trợ nhiều Client kết nối đồng thời bằng cách sử dụng Thread trong Java.","keywords":["Java","Multithreading","Socket","Networking"],"articleBody":"Trong bài trước, chúng ta đã xây dựng một Server TCP đơn giản chỉ xử lý được một Client tại một thời điểm. Nếu Client thứ hai kết nối, nó phải chờ đến khi Client đầu tiên ngắt kết nối.\nBài này sẽ nâng cấp Server để hỗ trợ nhiều Client đồng thời bằng cách sử dụng Multithreading – một kỹ thuật rất quan trọng trong lập trình mạng.\nSơ đồ Server TCP đa luồng xử lý nhiều Client cùng lúc (Nguồn: GeeksforGeeks)\nMục tiêu Server chấp nhận nhiều kết nối từ các Client. Mỗi Client được xử lý trong một luồng riêng (Thread). Server tiếp tục lắng nghe kết nối mới ngay cả khi đang xử lý Client cũ. Cách hoạt động Server mở ServerSocket và chờ kết nối (vòng lặp vô hạn). Khi một Client kết nối → tạo một Thread mới để xử lý Client đó. Thread riêng: nhận tin nhắn từ Client, trả phản hồi, rồi đóng kết nối. Server quay lại chờ Client mới. Code Server (Multithreaded) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 import java.io.*; import java.net.*; public class MultiThreadServer { public static void main(String[] args) { try (ServerSocket serverSocket = new ServerSocket(8080)) { System.out.println(\"Server đang chạy trên port 8080...\"); // Vòng lặp vô hạn để chấp nhận nhiều Client while (true) { Socket clientSocket = serverSocket.accept(); System.out.println(\"Client mới đã kết nối!\"); // Tạo Thread mới để xử lý Client này new Thread(() -\u003e handleClient(clientSocket)).start(); } } catch (IOException e) { e.printStackTrace(); } } // Hàm xử lý từng Client trong Thread riêng private static void handleClient(Socket clientSocket) { try { BufferedReader in = new BufferedReader( new InputStreamReader(clientSocket.getInputStream())); PrintWriter out = new PrintWriter(clientSocket.getOutputStream(), true); String message = in.readLine(); if (message != null) { System.out.println(\"Nhận từ Client: \" + message); out.println(\"OK - Server đã nhận: \" + message); } clientSocket.close(); System.out.println(\"Kết nối với Client đã đóng.\"); } catch (IOException e) { e.printStackTrace(); } } } ","wordCount":"354","inLanguage":"en","datePublished":"2025-12-25T00:00:00Z","dateModified":"2025-12-25T00:00:00Z","author":{"@type":"Person","name":"Lê Thanh Hoàng Đức"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://hoangduccudcud.github.io/posts/05-multithread-nhieu-client/"},"publisher":{"@type":"Organization","name":"Lê Thanh Hoàng Đức","logo":{"@type":"ImageObject","url":"https://hoangduccudcud.github.io/favicon.ico"}}}</script></head><body id=top><header class=header><nav class=nav><div class=logo><a href=https://hoangduccudcud.github.io/ accesskey=h title="Lê Thanh Hoàng Đức (Alt + H)">Lê Thanh Hoàng Đức</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://hoangduccudcud.github.io/ title="Trang Chủ"><span>Trang Chủ</span></a></li><li><a href=https://hoangduccudcud.github.io/about title="Giới Thiệu"><span>Giới Thiệu</span></a></li><li><a href=https://hoangduccudcud.github.io/posts title=Blog><span>Blog</span></a></li><li><a href=https://hoangduccudcud.github.io/projects title="Dự Án"><span>Dự Án</span></a></li><li><a href=https://hoangduccudcud.github.io/contact title="Liên Hệ"><span>Liên Hệ</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">Xử Lý Nhiều Client Cùng Lúc Với Multithreading</h1><div class=post-description>Nâng cấp Server TCP để hỗ trợ nhiều Client kết nối đồng thời bằng cách sử dụng Thread trong Java.</div><div class=post-meta><span title='2025-12-25 00:00:00 +0000 UTC'>25/12/2025</span>&nbsp;·&nbsp;<span>2 min</span>&nbsp;·&nbsp;<span>Lê Thanh Hoàng Đức</span></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#m%e1%bb%a5c-ti%c3%aau aria-label="Mục tiêu">Mục tiêu</a></li><li><a href=#c%c3%a1ch-ho%e1%ba%a1t-%c4%91%e1%bb%99ng aria-label="Cách hoạt động">Cách hoạt động</a></li><li><a href=#code-server-multithreaded aria-label="Code Server (Multithreaded)">Code Server (Multithreaded)</a></li></ul></div></details></div><div class=post-content><p>Trong bài trước, chúng ta đã xây dựng một Server TCP đơn giản chỉ xử lý được <strong>một Client</strong> tại một thời điểm. Nếu Client thứ hai kết nối, nó phải chờ đến khi Client đầu tiên ngắt kết nối.</p><p>Bài này sẽ nâng cấp Server để hỗ trợ <strong>nhiều Client đồng thời</strong> bằng cách sử dụng <strong>Multithreading</strong> – một kỹ thuật rất quan trọng trong lập trình mạng.</p><p><img alt="Minh họa Multithread Server" loading=lazy src=https://media.geeksforgeeks.org/wp-content/uploads/20220502163844/MultiThreadedServer-660x396.png>
<em><p style=text-align:center;font-size:.9rem;opacity:.8>Sơ đồ Server TCP đa luồng xử lý nhiều Client cùng lúc (Nguồn: GeeksforGeeks)</p></em></p><h2 id=mục-tiêu>Mục tiêu<a hidden class=anchor aria-hidden=true href=#mục-tiêu>#</a></h2><ul><li>Server chấp nhận nhiều kết nối từ các Client.</li><li>Mỗi Client được xử lý trong một <strong>luồng riêng</strong> (Thread).</li><li>Server tiếp tục lắng nghe kết nối mới ngay cả khi đang xử lý Client cũ.</li></ul><h2 id=cách-hoạt-động>Cách hoạt động<a hidden class=anchor aria-hidden=true href=#cách-hoạt-động>#</a></h2><ol><li>Server mở <code>ServerSocket</code> và chờ kết nối (vòng lặp vô hạn).</li><li>Khi một Client kết nối → tạo một Thread mới để xử lý Client đó.</li><li>Thread riêng: nhận tin nhắn từ Client, trả phản hồi, rồi đóng kết nối.</li><li>Server quay lại chờ Client mới.</li></ol><h2 id=code-server-multithreaded>Code Server (Multithreaded)<a hidden class=anchor aria-hidden=true href=#code-server-multithreaded>#</a></h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kn>import</span><span class=w> </span><span class=nn>java.io.*</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=kn>import</span><span class=w> </span><span class=nn>java.net.*</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>MultiThreadServer</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kd>static</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>main</span><span class=p>(</span><span class=n>String</span><span class=o>[]</span><span class=w> </span><span class=n>args</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>try</span><span class=w> </span><span class=p>(</span><span class=n>ServerSocket</span><span class=w> </span><span class=n>serverSocket</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>ServerSocket</span><span class=p>(</span><span class=n>8080</span><span class=p>))</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&#34;Server đang chạy trên port 8080...&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=c1>// Vòng lặp vô hạn để chấp nhận nhiều Client</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>while</span><span class=w> </span><span class=p>(</span><span class=kc>true</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>Socket</span><span class=w> </span><span class=n>clientSocket</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>serverSocket</span><span class=p>.</span><span class=na>accept</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&#34;Client mới đã kết nối!&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=c1>// Tạo Thread mới để xử lý Client này</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=k>new</span><span class=w> </span><span class=n>Thread</span><span class=p>(()</span><span class=w> </span><span class=o>-&gt;</span><span class=w> </span><span class=n>handleClient</span><span class=p>(</span><span class=n>clientSocket</span><span class=p>)).</span><span class=na>start</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w> </span><span class=k>catch</span><span class=w> </span><span class=p>(</span><span class=n>IOException</span><span class=w> </span><span class=n>e</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>e</span><span class=p>.</span><span class=na>printStackTrace</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=c1>// Hàm xử lý từng Client trong Thread riêng</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=kd>static</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>handleClient</span><span class=p>(</span><span class=n>Socket</span><span class=w> </span><span class=n>clientSocket</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>try</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>BufferedReader</span><span class=w> </span><span class=n>in</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>BufferedReader</span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=k>new</span><span class=w> </span><span class=n>InputStreamReader</span><span class=p>(</span><span class=n>clientSocket</span><span class=p>.</span><span class=na>getInputStream</span><span class=p>()));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>PrintWriter</span><span class=w> </span><span class=n>out</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>PrintWriter</span><span class=p>(</span><span class=n>clientSocket</span><span class=p>.</span><span class=na>getOutputStream</span><span class=p>(),</span><span class=w> </span><span class=kc>true</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>String</span><span class=w> </span><span class=n>message</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>in</span><span class=p>.</span><span class=na>readLine</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>message</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=kc>null</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&#34;Nhận từ Client: &#34;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>message</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&#34;OK - Server đã nhận: &#34;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>message</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>clientSocket</span><span class=p>.</span><span class=na>close</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&#34;Kết nối với Client đã đóng.&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w> </span><span class=k>catch</span><span class=w> </span><span class=p>(</span><span class=n>IOException</span><span class=w> </span><span class=n>e</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>e</span><span class=p>.</span><span class=na>printStackTrace</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=p>}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div></div><footer class=post-footer><ul class=post-tags><li><a href=https://hoangduccudcud.github.io/tags/java/>Java</a></li><li><a href=https://hoangduccudcud.github.io/tags/multithreading/>Multithreading</a></li><li><a href=https://hoangduccudcud.github.io/tags/socket/>Socket</a></li><li><a href=https://hoangduccudcud.github.io/tags/networking/>Networking</a></li></ul><nav class=paginav><a class=prev href=https://hoangduccudcud.github.io/posts/04-tcp-client-server-hello/><span class=title>« Prev</span><br><span>Xây Dựng TCP Client – Server Đơn Giản Với Java</span>
</a><a class=next href=https://hoangduccudcud.github.io/posts/06-tcp-vs-udp/><span class=title>Next »</span><br><span>Xử Lý Nhiều Client Cùng Lúc Với Multithreading</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://hoangduccudcud.github.io/>Lê Thanh Hoàng Đức</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");if(menu){const e=localStorage.getItem("menu-scroll-position");e&&(menu.scrollLeft=parseInt(e,10)),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}}document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{const e=document.querySelector("html");e.dataset.theme==="dark"?(e.dataset.theme="light",localStorage.setItem("pref-theme","light")):(e.dataset.theme="dark",localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>